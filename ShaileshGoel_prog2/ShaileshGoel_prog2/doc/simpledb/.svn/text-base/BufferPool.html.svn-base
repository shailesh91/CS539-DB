<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_05) on Tue Jan 20 13:27:35 PST 2009 -->
<TITLE>
BufferPool
</TITLE>

<META NAME="date" CONTENT="2009-01-20">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BufferPool";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../simpledb/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../simpledb/AbstractDbIterator.html" title="class in simpledb"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../simpledb/Catalog.html" title="class in simpledb"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?simpledb/BufferPool.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BufferPool.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
simpledb</FONT>
<BR>
Class BufferPool</H2>
<PRE>
java.lang.Object
  <IMG SRC="../resources/inherit.gif" ALT="extended by "><B>simpledb.BufferPool</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>BufferPool</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
BufferPool manages the reading and writing of pages into memory from
 disk. Access methods call into it to retrieve pages, and it fetches
 pages from the appropriate location.
 <p>
 The BufferPool is also responsible for locking;  when a transaction fetches
 a page, BufferPool which check that the transaction has the appropriate
 locks to read/write the page.
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#DEFAULT_PAGES">DEFAULT_PAGES</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#PAGE_SIZE">PAGE_SIZE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bytes per page, excluding header.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#BufferPool(int)">BufferPool</A></B>(int&nbsp;numPages)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructor.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#deleteTuple(simpledb.TransactionId, simpledb.Tuple)">deleteTuple</A></B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid,
            <A HREF="../simpledb/Tuple.html" title="class in simpledb">Tuple</A>&nbsp;t)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove the specified tuple from the buffer pool.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#discardPage(simpledb.PageId)">discardPage</A></B>(<A HREF="../simpledb/PageId.html" title="interface in simpledb">PageId</A>&nbsp;pid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove the specific page id from the buffer pool.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#evictPage()">evictPage</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Discards a page from the buffer pool.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#flushAllPages()">flushAllPages</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flush all dirty pages to disk.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#flushPage(simpledb.PageId)">flushPage</A></B>(<A HREF="../simpledb/PageId.html" title="interface in simpledb">PageId</A>&nbsp;pid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flushes a certain page to disk</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#flushPages(simpledb.TransactionId)">flushPages</A></B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Write all pages of the specified transaction to disk.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../simpledb/Page.html" title="interface in simpledb">Page</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#getPage(simpledb.TransactionId, simpledb.PageId, simpledb.Permissions)">getPage</A></B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid,
        <A HREF="../simpledb/PageId.html" title="interface in simpledb">PageId</A>&nbsp;pid,
        <A HREF="../simpledb/Permissions.html" title="class in simpledb">Permissions</A>&nbsp;perm)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieve the specified page with the associated permissions.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#holdsLock(simpledb.TransactionId, simpledb.PageId)">holdsLock</A></B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid,
          <A HREF="../simpledb/PageId.html" title="interface in simpledb">PageId</A>&nbsp;p)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return true if the specified transaction has a lock on the specified page</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#insertTuple(simpledb.TransactionId, int, simpledb.Tuple)">insertTuple</A></B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid,
            int&nbsp;tableId,
            <A HREF="../simpledb/Tuple.html" title="class in simpledb">Tuple</A>&nbsp;t)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add a tuple to the specified table behalf of transaction tid.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#releasePage(simpledb.TransactionId, simpledb.PageId)">releasePage</A></B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid,
            <A HREF="../simpledb/PageId.html" title="interface in simpledb">PageId</A>&nbsp;pid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Releases the lock on a page.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#transactionComplete(simpledb.TransactionId)">transactionComplete</A></B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Release all locks associated with a given transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../simpledb/BufferPool.html#transactionComplete(simpledb.TransactionId, boolean)">transactionComplete</A></B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid,
                    boolean&nbsp;commit)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Commit or abort a given transaction; release all locks associated to
 the transaction.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="PAGE_SIZE"><!-- --></A><H3>
PAGE_SIZE</H3>
<PRE>
public static final int <B>PAGE_SIZE</B></PRE>
<DL>
<DD>Bytes per page, excluding header.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../constant-values.html#simpledb.BufferPool.PAGE_SIZE">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="DEFAULT_PAGES"><!-- --></A><H3>
DEFAULT_PAGES</H3>
<PRE>
public static final int <B>DEFAULT_PAGES</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../constant-values.html#simpledb.BufferPool.DEFAULT_PAGES">Constant Field Values</A></DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="BufferPool(int)"><!-- --></A><H3>
BufferPool</H3>
<PRE>
public <B>BufferPool</B>(int&nbsp;numPages)</PRE>
<DL>
<DD>Constructor.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>numPages</CODE> - number of pages in this buffer pool</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getPage(simpledb.TransactionId, simpledb.PageId, simpledb.Permissions)"><!-- --></A><H3>
getPage</H3>
<PRE>
public <A HREF="../simpledb/Page.html" title="interface in simpledb">Page</A> <B>getPage</B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid,
                    <A HREF="../simpledb/PageId.html" title="interface in simpledb">PageId</A>&nbsp;pid,
                    <A HREF="../simpledb/Permissions.html" title="class in simpledb">Permissions</A>&nbsp;perm)
             throws <A HREF="../simpledb/TransactionAbortedException.html" title="class in simpledb">TransactionAbortedException</A>,
                    <A HREF="../simpledb/DbException.html" title="class in simpledb">DbException</A></PRE>
<DL>
<DD>Retrieve the specified page with the associated permissions.
 Will acquire a lock and may block if that lock is held by another
 transaction.
 <p>
 The retrieved page should be looked up in the buffer pool.  If it
 is present, it should be returned.  If it is not present, it should
 be added to the buffer pool and returned.  If there is insufficient
 space in the buffer pool, an page should be evicted and the new page
 should be added in its place.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tid</CODE> - the ID of the transaction requesting the page<DD><CODE>pid</CODE> - the ID of the requested page<DD><CODE>perm</CODE> - the requested permissions on the page
<DT><B>Throws:</B>
<DD><CODE><A HREF="../simpledb/TransactionAbortedException.html" title="class in simpledb">TransactionAbortedException</A></CODE>
<DD><CODE><A HREF="../simpledb/DbException.html" title="class in simpledb">DbException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="releasePage(simpledb.TransactionId, simpledb.PageId)"><!-- --></A><H3>
releasePage</H3>
<PRE>
public void <B>releasePage</B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid,
                        <A HREF="../simpledb/PageId.html" title="interface in simpledb">PageId</A>&nbsp;pid)</PRE>
<DL>
<DD>Releases the lock on a page.
 Calling this is very risky, and may result in wrong behavior. Think hard
 about who needs to call this and why, and why they can run the risk of
 calling it.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tid</CODE> - the ID of the transaction requesting the unlock<DD><CODE>pid</CODE> - the ID of the page to unlock</DL>
</DD>
</DL>
<HR>

<A NAME="transactionComplete(simpledb.TransactionId)"><!-- --></A><H3>
transactionComplete</H3>
<PRE>
public void <B>transactionComplete</B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid)
                         throws java.io.IOException</PRE>
<DL>
<DD>Release all locks associated with a given transaction.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tid</CODE> - the ID of the transaction requesting the unlock
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="holdsLock(simpledb.TransactionId, simpledb.PageId)"><!-- --></A><H3>
holdsLock</H3>
<PRE>
public boolean <B>holdsLock</B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid,
                         <A HREF="../simpledb/PageId.html" title="interface in simpledb">PageId</A>&nbsp;p)</PRE>
<DL>
<DD>Return true if the specified transaction has a lock on the specified page
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="transactionComplete(simpledb.TransactionId, boolean)"><!-- --></A><H3>
transactionComplete</H3>
<PRE>
public void <B>transactionComplete</B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid,
                                boolean&nbsp;commit)
                         throws java.io.IOException</PRE>
<DL>
<DD>Commit or abort a given transaction; release all locks associated to
 the transaction.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tid</CODE> - the ID of the transaction requesting the unlock<DD><CODE>commit</CODE> - a flag indicating whether we should commit or abort
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="insertTuple(simpledb.TransactionId, int, simpledb.Tuple)"><!-- --></A><H3>
insertTuple</H3>
<PRE>
public void <B>insertTuple</B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid,
                        int&nbsp;tableId,
                        <A HREF="../simpledb/Tuple.html" title="class in simpledb">Tuple</A>&nbsp;t)
                 throws <A HREF="../simpledb/DbException.html" title="class in simpledb">DbException</A>,
                        java.io.IOException,
                        <A HREF="../simpledb/TransactionAbortedException.html" title="class in simpledb">TransactionAbortedException</A></PRE>
<DL>
<DD>Add a tuple to the specified table behalf of transaction tid.  Will
 acquire a write lock on the page the tuple is added to. May block if
 the lock cannot be acquired.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tid</CODE> - the transaction adding the tuple<DD><CODE>tableId</CODE> - the table to add the tuple to<DD><CODE>t</CODE> - the tuple to add
<DT><B>Throws:</B>
<DD><CODE><A HREF="../simpledb/DbException.html" title="class in simpledb">DbException</A></CODE>
<DD><CODE>java.io.IOException</CODE>
<DD><CODE><A HREF="../simpledb/TransactionAbortedException.html" title="class in simpledb">TransactionAbortedException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="deleteTuple(simpledb.TransactionId, simpledb.Tuple)"><!-- --></A><H3>
deleteTuple</H3>
<PRE>
public void <B>deleteTuple</B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid,
                        <A HREF="../simpledb/Tuple.html" title="class in simpledb">Tuple</A>&nbsp;t)
                 throws <A HREF="../simpledb/DbException.html" title="class in simpledb">DbException</A>,
                        <A HREF="../simpledb/TransactionAbortedException.html" title="class in simpledb">TransactionAbortedException</A></PRE>
<DL>
<DD>Remove the specified tuple from the buffer pool.
 Will acquire a write lock on the page the tuple is added to. May block if
 the lock cannot be acquired.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tid</CODE> - the transaction adding the tuple.<DD><CODE>t</CODE> - the tuple to add
<DT><B>Throws:</B>
<DD><CODE><A HREF="../simpledb/DbException.html" title="class in simpledb">DbException</A></CODE>
<DD><CODE><A HREF="../simpledb/TransactionAbortedException.html" title="class in simpledb">TransactionAbortedException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="flushAllPages()"><!-- --></A><H3>
flushAllPages</H3>
<PRE>
public void <B>flushAllPages</B>()
                   throws java.io.IOException</PRE>
<DL>
<DD>Flush all dirty pages to disk.
 NB: Be careful using this routine -- it writes dirty data to disk so will
     break simpledb if running in NO STEAL mode.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="discardPage(simpledb.PageId)"><!-- --></A><H3>
discardPage</H3>
<PRE>
public void <B>discardPage</B>(<A HREF="../simpledb/PageId.html" title="interface in simpledb">PageId</A>&nbsp;pid)</PRE>
<DL>
<DD>Remove the specific page id from the buffer pool.
        Needed by the recovery manager to ensure that the
        buffer pool doesn't keep a rolled back page in its
        cache.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="flushPage(simpledb.PageId)"><!-- --></A><H3>
flushPage</H3>
<PRE>
private void <B>flushPage</B>(<A HREF="../simpledb/PageId.html" title="interface in simpledb">PageId</A>&nbsp;pid)
                throws java.io.IOException</PRE>
<DL>
<DD>Flushes a certain page to disk
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pid</CODE> - an ID indicating the page to flush
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="flushPages(simpledb.TransactionId)"><!-- --></A><H3>
flushPages</H3>
<PRE>
public void <B>flushPages</B>(<A HREF="../simpledb/TransactionId.html" title="class in simpledb">TransactionId</A>&nbsp;tid)
                throws java.io.IOException</PRE>
<DL>
<DD>Write all pages of the specified transaction to disk.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="evictPage()"><!-- --></A><H3>
evictPage</H3>
<PRE>
private void <B>evictPage</B>()
                throws <A HREF="../simpledb/DbException.html" title="class in simpledb">DbException</A></PRE>
<DL>
<DD>Discards a page from the buffer pool.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../simpledb/DbException.html" title="class in simpledb">DbException</A></CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../simpledb/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../simpledb/AbstractDbIterator.html" title="class in simpledb"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../simpledb/Catalog.html" title="class in simpledb"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?simpledb/BufferPool.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BufferPool.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
